{% load static %}
{% load widget_tweaks %}
<html>
	<head>

		    <meta charset="utf-8">
		    <meta http-equiv="x-ua-compatible" content="ie=edge">
		    <title>ITeam Admin</title>
		    <meta name="description" content="">
		    <meta name="viewport" content="width=device-width, initial-scale=1">
		    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
		    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
		    <link rel="stylesheet" href="{% static 'dashboard/css/bootstrap.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/font-awesome.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/owl.carousel.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/owl.theme.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/owl.transitions.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/animate.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/normalize.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/meanmenu.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/main.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/form/all-type-forms.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/educate-custon-icon.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/morrisjs/morris.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/dropzone/dropzone.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/scrollbar/jquery.mCustomScrollbar.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/metisMenu/metisMenu.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/metisMenu/metisMenu-vertical.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/calendar/fullcalendar.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/calendar/fullcalendar.print.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/cropper/cropper.min.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/style.css' %}">
		    <link rel="stylesheet" href="{% static 'dashboard/css/responsive.css' %}">
		    <script src="{% static 'dashboard/js/vendor/modernizr-2.8.3.min.js' %}"></script>
				<title>Add {{ field }}</title>
        <script type="text/javascript" src="/static/admin/js/vendor/jquery/jquery.js"></script>
        <script type="text/javascript" src="/static/admin/js/jquery.init.js"></script>
				<script type="text/javascript" src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
	</head>
	<body>

		<h1>Add {{ field }}</h1>
		<div class="single-pro-review-area mt-t-30 mg-b-15">
				<div class="container-fluid">
						<div class="row">
								<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
										<div class="product-payment-inner-st">
											<div class="row">
													<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
														<form method="POST" action="/dashboard/add/{{ field }}/" enctype="multipart/form-data">
															{% csrf_token %}
															<div class="row">
																<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
																	{% for field in form.visible_fields %}
																	<div class="form-group">
																		{{ field.label }}
																		{{ field|add_class:"form-control" }}
																		{{ field.help_text }}
																	</div>
																	{% endfor %}
																</div>
																{{ form.x }}
																{{ form.y }}
																{{ form.width }}
																{{ form.height }}
															</div>

															{% if form.errors %}
															{% for error in form.errors %}
															<p>{{ error }}<p>
															{% endfor %}
															{% endif %}
															<div class="row">
																	<div class="col-lg-12">
																			<div class="payment-adress">
																					<input type="submit" /> | <a href="javascript:window.close()">Cancel</a>
																			</div>
																	</div>
															</div>
														</form>
													</div>
											</div>
										</div>
								</div>
						</div>
				</div>
		</div>
		<div class="modal fade" id="modalCrop">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title">Crop the photo</h4>
					</div>
					<div class="modal-body">
						<img src="" id="image" style="max-width: 100%;">
					</div>
					<div class="modal-footer">
						<div class="btn-group pull-left" role="group">
							<button type="button" class="btn btn-default js-zoom-in">
								<span class="glyphicon glyphicon-zoom-in"></span>
							</button>
							<button type="button" class="btn btn-default js-zoom-out">
								<span class="glyphicon glyphicon-zoom-out"></span>
							</button>
						</div>
						<button type="button" class="btn btn-default" data-dismiss="modal">Nevermind</button>
						<button type="button" class="btn btn-primary js-crop-and-upload">Crop</button>
					</div>
				</div>
			</div>
		</div>

		<script src="{% static 'dashboard/js/vendor/jquery-1.12.4.min.js' %}"></script>
		<script src="{% static 'dashboard/js/bootstrap.min.js' %}"></script>
		<script src="{% static 'dashboard/js/wow.min.js' %}"></script>
		<script src="{% static 'dashboard/js/jquery-price-slider.js' %}"></script>
		<script src="{% static 'dashboard/js/jquery.meanmenu.js' %}"></script>
		<script src="{% static 'dashboard/js/owl.carousel.min.js' %}"></script>
		<script src="{% static 'dashboard/js/jquery.sticky.js' %}"></script>
		<script src="{% static 'dashboard/js/jquery.scrollUp.min.js' %}"></script>
		<script src="{% static 'dashboard/js/form-validation/jquery.form.min.js' %}"></script>
    <script src="{% static 'dashboard/js/form-validation/jquery.validate.min.js' %}"></script>
    <script src="{% static 'dashboard/js/form-validation/form-active.js' %}"></script>
    <script src="{% static 'dashboard/js/dropzone/dropzone.js' %}"></script>
    <script src="{% static 'dashboard/js/tab.js' %}"></script>
    <script src="{% static 'dashboard/js/plugins.js' %}"></script>
    <script src="{% static 'dashboard/js/main.js' %}"></script>
		<script src="{% static 'dashboard/js/cropper/cropper.min.js' %}"></script>
		<script>
			$(function () {
				/* SCRIPT TO OPEN THE MODAL WITH THE PREVIEW */
				$("#id_brand_image").change(function () {
					if (this.files && this.files[0]) {
						var reader = new FileReader();
						reader.onload = function (e) {
							$("#image").attr("src", e.target.result);
							$("#modalCrop").modal("show");
						}
						reader.readAsDataURL(this.files[0]);
					}
				});
				/* SCRIPTS TO HANDLE THE CROPPER BOX */
				var $image = $("#image");
				var cropBoxData;
				var canvasData;
				$("#modalCrop").on("shown.bs.modal", function () {
					$image.cropper({
						viewMode: 1,
						aspectRatio: 2/1,
						ready: function () {
							$image.cropper("setCanvasData", canvasData);
							$image.cropper("setCropBoxData", cropBoxData);
						}
					});
				}).on("hidden.bs.modal", function () {
					cropBoxData = $image.cropper("getCropBoxData");
					canvasData = $image.cropper("getCanvasData");
					$image.cropper("destroy");
				});
				$(".js-zoom-in").click(function () {
					$image.cropper("zoom", 0.1);
				});
				$(".js-zoom-out").click(function () {
					$image.cropper("zoom", -0.1);
				});
				/* SCRIPT TO COLLECT THE DATA AND POST TO THE SERVER */
				$(".js-crop-and-upload").click(function () {
					var cropData = $image.cropper("getData");
					$("#id_x").val(cropData["x"]);
					$("#id_y").val(cropData["y"]);
					$("#id_height").val(cropData["height"]);
					$("#id_width").val(cropData["width"]);
					$("#modalCrop").modal("hide");
				});
			});
		</script>
	</body>


</html>
